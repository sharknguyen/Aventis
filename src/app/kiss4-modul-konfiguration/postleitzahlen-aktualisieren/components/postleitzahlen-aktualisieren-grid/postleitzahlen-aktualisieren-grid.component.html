<div *ngIf="gridFunctionModel.isFilterBuilder" class="filter-container">
    <dx-filter-builder [fields]="filterColumns" [(value)]="filterAvs"></dx-filter-builder>
    <dx-button [text]="'PostleitzahlenAktualisieren.ApplyFilter' | translate" type="default"
        (onClick)="gridPostleitzahlen.instance.filter(filterAvs)">
    </dx-button>
</div>
<dx-data-grid
    #gridPostleitzahlen
    id="c005_postleizahlen_data-grid"
    class="kiss-data-grid"
    [dataSource]="dataSource"
    [showBorders]="true"
    [showColumnLines]="true"
    [allowColumnResizing]="true"
    [allowColumnReordering]="true"
    [showRowLines]="true"
    [focusedRowEnabled]="true"
    [focusedRowKey]="selectedKeys"
    [customizeExportData]="customizeExportData"
    [hoverStateEnabled]="true"
    columnResizingMode="widget"
    (onRowPrepared)="onRowPrepared($event)"
    (onFocusedRowChanged)="onFocusedRowChanged($event)"
    (onContextMenuPreparing)="onContextMenuPreparing($event)">
    <dxo-paging [pageSize]="50"></dxo-paging>
    <dxo-selection mode="single"></dxo-selection>
    <dxo-scrolling mode="virtual"></dxo-scrolling>
    <dxo-load-panel [enabled]="false"></dxo-load-panel>
    <dxo-filter-row [visible]="gridFunctionModel.isSearch"></dxo-filter-row>
    <dxo-header-filter [visible]="gridFunctionModel.isFilter"></dxo-header-filter>
    <dxo-grouping [autoExpandAll]="false" [contextMenuEnabled]="gridFunctionModel.isGrouping"></dxo-grouping>
    <dxo-search-panel [visible]="gridFunctionModel.isSearchPanel" highlightCaseSensitive="true"></dxo-search-panel>
    <dxo-export [fileName]="'PostleitzahlenAktualisieren.Title' | translate" [customizeExcelCell]="customizeExcelCell"></dxo-export>
    <dxo-group-panel [visible]="gridFunctionModel.isGrouping" [emptyPanelText]="'PostleitzahlenAktualisieren.emptyPanelText' | translate"></dxo-group-panel>
    <dxo-column-chooser #columnChooser [title]="'PostleitzahlenAktualisieren.Message.titleBenutzerdefiniert' | translate" emptyPanelText=""></dxo-column-chooser>

    <dxi-column [allowFiltering]="false" [allowHiding]="false" [allowExporting]="false" [allowReordering]="false" [allowResizing]="false" caption="" width="20" cellTemplate="cellTemplate" alignment="center"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="plz" [caption]="'PostleitzahlenAktualisieren.PLZ' | translate"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="plzSuffix" [caption]="'PostleitzahlenAktualisieren.PLZSuffix' | translate"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="name" [caption]="'PostleitzahlenAktualisieren.Name' | translate"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="kanton" [caption]="'PostleitzahlenAktualisieren.Kanton' | translate"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="bfsCode" [caption]="'PostleitzahlenAktualisieren.BFSCode' | translate"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="baPLZID" [caption]="'PostleitzahlenAktualisieren.ONRP' | translate"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="sortkey" [caption]="'PostleitzahlenAktualisieren.Sortkey' | translate"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="datumVon" [caption]="'PostleitzahlenAktualisieren.DatumVon' | translate" dataType="date" [format]="formatDate"></dxi-column>
    <dxi-column [minWidth]="50" width="auto" dataField="datumBis" [caption]="'PostleitzahlenAktualisieren.DatumBis' | translate" dataType="date" [format]="formatDate"></dxi-column>
    <dxi-column [minWidth]="150" width="auto" dataField="system" [caption]="'PostleitzahlenAktualisieren.System' | translate" [allowFiltering]="false" [allowHeaderFiltering]="true"></dxi-column>
    <div *dxTemplate="let data of 'cellTemplate'">
        <i *ngIf="data.data == rowSelectedIndex" class="fa fa-caret-right"></i>
    </div>
</dx-data-grid>

<!-- Grid setting component -->
<app-grid-function #gridFunction (onchange)="onChangeGridSetting()" [keyStorage]="gridFunctionKey"></app-grid-function>